<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="stylesheet" href="css/style.css">
	<style>

	</style>
</head>
<body>
	<div class="container">
		<header></header>
		<section class="content">
			<div class="wrapper">
				<ul>
					<li class="menu">
						<div class="title">区 域</div>
						<div class="select">
							<div class="input">
								<label>请选择</label>
								<select name="sel1" id="localArea" data-type="menu"></select>
							</div>
							<div class="input">
								<label>请选择</label>
								<select name="" id="sel">
								</select>
							</div>
						</div>
					</li>
					<li class="menu">
						<div class="title">品 牌</div>
						<div class="select">
							<div class="input">
								<label>请选择</label>
								<select name="sel1" id="ObjectType" data-type="menu">
								</select>
							</div>
							<div class="input">
								<label>请选择</label>
								<select name="" id="">
								 
								</select>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</section>
	</div>
	<script src="js/data.js"></script>
	<script>
	var sele = document.getElementsByName("sel1")
	function init(){
		
        for(var i=0;i<sele.length;i++){
        	var seid = sele[i].id;//var id = sele[i].getAttribute("id");两个Id
            var type = datasrc[seid];//拿出数据中的两个
            var html = "<option value='-1'>请选择</option>";
            //判断他是不是数组，统一一下子，拿出对象中的option数组，一起遍历
            if((type instanceof Array)===false){
            	type=type.option;
            }
            //一起遍历
            for(var j in type){
            	//判断是id还是value
            	var objid = type[j].id?type[j].id:type[j].value;
            	//判断是name还是text
            	var objname = type[j].name?type[j].name:type[j].text;
            	//拼接字符串
            	html+="<option value="+objid+">"+objname+"</option>";
            }
            //把内容放入select中
            sele[i].innerHTML=html;
            onchangesele(sele[i],type);
        }
	}
	init();	
	function onchangesele(select,data){

      var lab = select.previousElementSibling;//获取lab
      var parents = select.parentNode.nextElementSibling;//下一个元素兄弟
      var sel2 = parents.lastElementChild;//下一个元素兄弟
      //下拉框发生改变
      select.onchange=function(){
      	//获取下拉框里面的值
         var val = this.value;
         var sel2html = "<option value='-1'>请选择</option>";
         //如果你选中的是请选择，让第二个框隐藏，否则让他出现
         if(val =="-1"){
         	parents.style.visibility="hidden";
            lab.innerHTML="<option value='-1'>请选择</option>";
            sel2.innerHTML="";
         }else{
         	parents.style.visibility="visible";
         	//你所选中的值
         	var txt = this.childNodes[this.selectedIndex].innerHTML;
         	lab.innerHTML=txt;
         	//再一次遍历
         	for(var k in data){
         		var sid = data[k].id?data[k].id:data[k].value;
         		if(val ==sid){
         			//拿到里面的option数据
                    for(var o in data[k].option){
                       var sel2id =data[k].option[o].id?data[k].option[o].id:data[k].option[o].value;
                       var sel2name = data[k].option[o].name?data[k].option[o].name:data[k].option[o].text;
                       sel2html+="<option value="+sel2id+">"+sel2name+"</option>";
                          
                    }
         		}
         	}
         	//把他给第二个下拉框
         	sel2.innerHTML=sel2html;
         	onchangetwo(sel2);
         }
      }
	}
	//
	function onchangetwo(sel){
     var lab = sel.previousElementSibling;//获取lab
     //让第二个下拉框改变，给变内容
     sel.onchange=function(){
     	var txt = this.childNodes[this.selectedIndex].innerHTML;
     	lab.innerHTML=txt;
     }
	}
	</script>
</body>
</html>