<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>同时运动</title>
	<style>
     *{
     	margin: 0;
     	padding: 0;
     }
     #box{
     	margin:50px auto;
     	width: 100px;
     	height: 100px;
     	background: skyblue;
     }
	</style>
</head>
<body>
	<div id="box"></div>
	<script>
		var box = document.getElementById("box");
		var time=null;
		box.onmouseover=function(){
            startMove(box,{"width":600,"height":400},function(){
                startMove(box,{"opacity":20});
            })
		}
		box.onmouseout=function(){
            startMove(box,{"width":100,"height":100},function(){
               startMove(box,{"opacity":90});
            })
		}
		function getStyle(obj, name)
{
    if(obj.currentStyle)
    {
        return obj.currentStyle[name];
    }
    else
    {
        return getComputedStyle(obj, false)[name];
    }
}


//startMove(oDiv, {width: 400, height: 400})


function startMove(obj, json, fnEnd)
{
    clearInterval(obj.timer);
    obj.timer=setInterval(function (){
        var bStop=true;        //假设：所有值都已经到了
        
        for(var attr in json)
        {
            var cur=0;
            
            if(attr=='opacity')
            {
                cur=Math.round(parseFloat(getStyle(obj, attr))*100);
            }
            else
            {
                cur=parseInt(getStyle(obj, attr));
            }
            
            var speed=(json[attr]-cur)/6;
            speed=speed>0?Math.ceil(speed):Math.floor(speed);
            
            if(cur!=json[attr])
                bStop=false;
            
            if(attr=='opacity')
            {
                obj.style.filter='alpha(opacity:'+(cur+speed)+')';
                obj.style.opacity=(cur+speed)/100;
            }
            else
            {
                obj.style[attr]=cur+speed+'px';
            }
        }
        
        if(bStop)
        {
            clearInterval(obj.timer);
                        
            if(fnEnd)fnEnd();
        }
    }, 30);
}
	</script>
</body>
</html>